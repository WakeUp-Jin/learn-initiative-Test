<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{courseTitle}} - Oboe</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: #faf9f7;
            color: #333;
            line-height: 1.6;
        }

        .main-wrapper {
            display: flex;
            min-height: 100vh;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .main-content {
            flex: 1;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            backface-visibility: hidden;
            overflow-x: hidden;
        }

        .main-content.with-sidebar {
            flex: 0 0 calc(100% - 400px);
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .main-content.with-sidebar .container {
            opacity: 0.98;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            padding: 20px 0;
        }

        .logo {
            font-size: 24px;
            font-weight: 600;
            color: #333;
        }

        .new-course-btn {
            background-color: #f5f5f5;
            border: 1px solid #ddd;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 14px;
            color: #666;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .course-hero {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: flex-start;
        }

        .course-image {
            width: 200px;
            height: 200px;
            background: linear-gradient(135deg, #8B4513, #CD853F);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            position: relative;
            overflow: hidden;
        }

        .book-stack {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 3px;
        }

        .book {
            width: 80px;
            height: 12px;
            border-radius: 2px;
        }

        .book:nth-child(1) { background-color: #2E8B57; }
        .book:nth-child(2) { background-color: #CD853F; }
        .book:nth-child(3) { background-color: #4682B4; }
        .book:nth-child(4) { background-color: #DAA520; }
        .book:nth-child(5) { background-color: #DC143C; }
        .book:nth-child(6) { background-color: #8B4513; }
        .book:nth-child(7) { background-color: #228B22; }

        .course-info {
            flex: 1;
        }

        .course-title {
            font-size: 32px;
            font-weight: 300;
            margin-bottom: 8px;
            line-height: 1.2;
        }

        .course-subtitle {
            font-size: 14px;
            color: #666;
            margin-bottom: 4px;
            font-style: italic;
        }

        .course-description {
            font-size: 14px;
            color: #666;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .share-btn {
            background-color: transparent;
            border: 1px solid #ddd;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 14px;
            color: #666;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }

        .section {
            margin-bottom: 40px;
        }

        .section-title {
            font-size: 18px;
            font-weight: 400;
            margin-bottom: 16px;
            font-style: italic;
        }

        .section-description {
            font-size: 14px;
            color: #666;
            margin-bottom: 20px;
        }

        .activity-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .activity-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            border-radius: 6px;
            position: relative;
            overflow: hidden;
        }

        .activity-item:hover {
            background-color: #f8f8f8;
            transform: translateX(4px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .activity-item.active {
            background-color: #e8f4f8;
            border-color: #d0e8f0;
            transform: translateX(8px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .activity-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 3px;
            background: linear-gradient(to bottom, #4f9cf9, #2563eb);
            transform: scaleY(0);
            transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .activity-item.active::before {
            transform: scaleY(1);
        }

        .activity-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .activity-icon {
            width: 20px;
            height: 20px;
            background-color: #333;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 10px;
        }

        .activity-name {
            font-size: 14px;
            color: #333;
        }

        .activity-duration {
            font-size: 12px;
            color: #999;
        }

        .continue-learning {
            background-color: #fff;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .topic-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .topic-item {
            font-size: 14px;
            color: #666;
            padding: 8px 0;
            border-bottom: 1px solid #f5f5f5;
        }

        .topic-item:last-child {
            border-bottom: none;
        }

        /* 侧边栏样式 */
        .sidebar {
            width: 0;
            background-color: #fff;
            border-left: 1px solid #e0e0e0;
            transition: width 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            backface-visibility: hidden;
        }

        .sidebar.open {
            width: 400px;
            box-shadow: -4px 0 20px rgba(0,0,0,0.1);
        }

        .sidebar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid #f0f0f0;
            flex-shrink: 0;
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
        }

        .sidebar-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            color: #666;
            padding: 8px;
            border-radius: 50%;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
        }

        .close-btn:hover {
            background-color: #f5f5f5;
            transform: scale(1.1) rotate(-180deg);
            color: #333;
        }

        .sidebar-content {
            padding: 20px;
            flex: 1;
            overflow-y: auto;
            animation: slideInContent 0.5s ease-out 0.2s both;
        }

        @keyframes slideInContent {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .takeaway-item {
            margin-bottom: 24px;
            padding-bottom: 20px;
            border-bottom: 1px solid #f5f5f5;
            opacity: 0;
            transform: translateY(10px);
            animation: fadeInUp 0.4s ease-out forwards;
        }

        .takeaway-item:nth-child(1) { animation-delay: 0.1s; }
        .takeaway-item:nth-child(2) { animation-delay: 0.2s; }
        .takeaway-item:nth-child(3) { animation-delay: 0.3s; }
        .takeaway-item:nth-child(4) { animation-delay: 0.4s; }
        .takeaway-item:nth-child(5) { animation-delay: 0.5s; }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .takeaway-item:last-child {
            border-bottom: none;
        }

        .takeaway-number {
            font-size: 14px;
            font-weight: 600;
            color: #666;
            margin-bottom: 8px;
        }

        .takeaway-title {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
            font-style: italic;
            position: relative;
            transition: color 0.2s ease;
        }

        .takeaway-item:hover .takeaway-title {
            color: #2563eb;
        }

        .takeaway-description {
            font-size: 14px;
            line-height: 1.6;
            color: #555;
        }

        /* 响应式设计 */
        @media (max-width: 1200px) {
            .main-content.with-sidebar {
                flex: 0 0 calc(100% - 350px);
            }
            
            .sidebar.open {
                width: 350px;
            }
        }

        @media (max-width: 1024px) {
            .main-content.with-sidebar {
                flex: 0 0 calc(100% - 300px);
            }
            
            .sidebar.open {
                width: 300px;
            }
        }

        @media (max-width: 768px) {
            .main-wrapper {
                flex-direction: column;
            }
            
            .main-content.with-sidebar {
                flex: 1;
            }
            
            .sidebar.open {
                width: 100%;
                max-height: 60vh;
                border-left: none;
                border-top: 1px solid #e0e0e0;
            }
            
            .course-hero {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }

            .course-image {
                width: 150px;
                height: 150px;
            }

            .course-title {
                font-size: 24px;
            }

            .header {
                flex-direction: column;
                gap: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="main-wrapper">
        <div class="main-content" id="main-content">
            <div class="container">
                <header class="header">
                    <div class="logo">{{siteName}}</div>
                    <a href="#" class="new-course-btn">
                        🎓 New Course
                    </a>
                </header>

                <section class="course-hero">
                    <div class="course-image">
                        {{#if courseImage}}
                        <img src="{{courseImage}}" alt="{{courseTitle}}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 12px;">
                        {{else}}
                        <div class="book-stack">
                            <div class="book"></div>
                            <div class="book"></div>
                            <div class="book"></div>
                            <div class="book"></div>
                            <div class="book"></div>
                            <div class="book"></div>
                            <div class="book"></div>
                        </div>
                        {{/if}}
                    </div>
                    <div class="course-info">
                        <h1 class="course-title">{{courseTitle}}</h1>
                        <div class="course-subtitle">{{courseSubtitle}}</div>
                        <p class="course-description">{{courseDescription}}</p>
                        <button class="share-btn">
                            📤 Share this course with others for free
                        </button>
                    </div>
                </section>

                {{#each activitySections}}
                <section class="section">
                    <h2 class="section-title">{{sectionTitle}}</h2>
                    <p class="section-description">{{sectionDescription}}</p>
                    <div class="activity-list">
                        {{#each activities}}
                        <div class="activity-item"{{#if sidebarType}} onclick="openSidebar('{{sidebarType}}', this)"{{/if}}>
                            <div class="activity-info">
                                <div class="activity-icon">{{icon}}</div>
                                <span class="activity-name">{{title}}</span>
                            </div>
                            <span class="activity-duration">{{time}}</span>
                        </div>
                        {{/each}}
                    </div>
                </section>
                {{/each}}

                <section class="section">
                    <h2 class="section-title">Continue learning</h2>
                    <div class="continue-learning">
                        <div class="topic-list">
                            {{#each topicList}}
                            <div class="topic-item">{{this}}</div>
                            {{/each}}
                        </div>
                    </div>
                </section>
            </div>
        </div>

        <!-- 侧边栏 -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">
                    <span id="sidebar-icon">📝</span>
                    <span id="sidebar-title-text">Takeaways</span>
                </div>
                <button class="close-btn" onclick="closeSidebar()">
                    ←
                </button>
            </div>
            <div class="sidebar-content" id="sidebar-content">
                <!-- 内容将通过JavaScript动态加载 -->
            </div>
        </div>
    </div>

    <script>
        // 侧边栏内容数据
        const sidebarContent = {
            'key-takeaways': {
                icon: '📝',
                title: 'Takeaways',
                items: [
                    {
                        number: '1.',
                        title: 'Types of Pants',
                        description: 'Understand the main categories such as jeans (durable denim for casual wear), chinos (lightweight cotton for semi-casual settings), and dress pants (formal trousers for professional occasions), along with their typical uses to match pants with the right event.'
                    },
                    {
                        number: '2.',
                        title: 'Fit and Sizing Basics',
                        description: 'Learn key measurements like waist (around your abdomen), inseam (length from crotch to pant bottom), and rise (crotch to waistband height), which are essential for choosing pants that fit comfortably and look flattering.'
                    },
                    {
                        number: '3.',
                        title: 'Different Fits Explained',
                        description: 'Know the common fits—such as slim (close to the body), regular, and relaxed—and how each affects both appearance and comfort, helping you pick pants that suit your body shape and style preferences.'
                    },
                    {
                        number: '4.',
                        title: 'How to Measure Pants Correctly',
                        description: 'Accurately measure waist, inseam, and rise using a soft tape measure to ensure proper sizing without trial and error, streamlining your selection process.'
                    },
                    {
                        number: '5.',
                        title: 'Fabric Choices Impact',
                        description: 'Recognize typical materials like denim (durable cotton twill), wool (warm and formal), and polyester blends (wrinkle-resistant), understanding how each affects comfort, durability, and care requirements.'
                    }
                ]
            },
            'deep-dive': {
                icon: '🎯',
                title: 'Deep Dive',
                items: [
                    {
                        number: '1.',
                        title: 'Understanding Trouser Construction',
                        description: 'Explore the fundamental elements of trouser design, from waistband construction to hem finishing, and how each component affects the overall fit and durability of the garment.'
                    },
                    {
                        number: '2.',
                        title: 'Body Type Considerations',
                        description: 'Learn how different body shapes affect trouser selection, including considerations for proportion, fit preferences, and styling techniques that enhance your natural silhouette.'
                    },
                    {
                        number: '3.',
                        title: 'Seasonal Fabric Selection',
                        description: 'Discover how to choose appropriate fabrics for different seasons, considering breathability, warmth, and versatility across various weather conditions.'
                    },
                    {
                        number: '4.',
                        title: 'Professional vs. Casual Styling',
                        description: 'Master the art of transitioning trouser styles between professional and casual settings, understanding when and how to adapt your choices for different occasions.'
                    }
                ]
            }
        };

        let currentActiveItem = null;
        let isAnimating = false;

        function openSidebar(contentType, clickedElement) {
            if (isAnimating) return; // 防止快速点击导致的动画冲突
            
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('main-content');
            const sidebarIcon = document.getElementById('sidebar-icon');
            const sidebarTitleText = document.getElementById('sidebar-title-text');
            const sidebarContentDiv = document.getElementById('sidebar-content');
            
            const content = sidebarContent[contentType];
            if (!content) return;
            
            isAnimating = true;
            
            // 移除之前的active状态
            if (currentActiveItem) {
                currentActiveItem.classList.remove('active');
            }
            
            // 添加新的active状态
            clickedElement.classList.add('active');
            currentActiveItem = clickedElement;
            
            // 添加点击反馈动画
            clickedElement.style.transform = 'scale(0.98)';
            setTimeout(() => {
                clickedElement.style.transform = '';
            }, 150);
            
            // 更新侧边栏标题
            sidebarIcon.textContent = content.icon;
            sidebarTitleText.textContent = content.title;
            
            // 生成内容
            let contentHTML = '';
            content.items.forEach(item => {
                contentHTML += `
                    <div class="takeaway-item">
                        <div class="takeaway-number">${item.number}</div>
                        <div class="takeaway-title">${item.title}</div>
                        <div class="takeaway-description">${item.description}</div>
                    </div>
                `;
            });
            
            sidebarContentDiv.innerHTML = contentHTML;
            
            // 显示侧边栏并调整主内容
            sidebar.classList.add('open');
            mainContent.classList.add('with-sidebar');
            
            // 添加页面滚动到顶部的动画
            if (window.scrollY > 0) {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            }
            
            // 重置动画状态
            setTimeout(() => {
                isAnimating = false;
            }, 400);
        }

        function closeSidebar() {
            if (isAnimating) return;
            
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('main-content');
            
            isAnimating = true;
            
            // 移除active状态
            if (currentActiveItem) {
                currentActiveItem.classList.remove('active');
                currentActiveItem = null;
            }
            
            sidebar.classList.remove('open');
            mainContent.classList.remove('with-sidebar');
            
            // 重置动画状态
            setTimeout(() => {
                isAnimating = false;
            }, 400);
        }

        // 添加键盘快捷键支持
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeSidebar();
            }
        });

        // 添加页面加载动画
        document.addEventListener('DOMContentLoaded', function() {
            const activityItems = document.querySelectorAll('.activity-item');
            activityItems.forEach((item, index) => {
                item.style.opacity = '0';
                item.style.transform = 'translateY(20px)';
                setTimeout(() => {
                    item.style.transition = 'all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
                    item.style.opacity = '1';
                    item.style.transform = 'translateY(0)';
                }, index * 100 + 200);
            });
        });
    </script>
</body>
</html>